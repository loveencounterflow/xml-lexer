{
  "version": 3,
  "file": "main.js",
  "sourceRoot": "..",
  "sources": [
    "src/main.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\n\n\nEventEmitter = require('eventemitter3')\n{ isa\n  validate\n  type_of }               = ( new ( require 'intertype' ).Intertype() ).export()\n\nnoop = ->\n\nState = {\n  data:                   'state-data'\n  cdata:                  'state-cdata'\n  tagBegin:               'state-tag-begin'\n  tagName:                'state-tag-name'\n  tagEnd:                 'state-tag-end'\n  attributeNameStart:     'state-attribute-name-start'\n  attributeName:          'state-attribute-name'\n  attributeNameEnd:       'state-attribute-name-end'\n  attributeValueBegin:    'state-attribute-value-begin'\n  attributeValue:         'state-attribute-value'\n  }\n\nAction = {\n  lt:                     'action-lt'\n  gt:                     'action-gt'\n  space:                  'action-space'\n  equal:                  'action-equal'\n  quote:                  'action-quote'\n  slash:                  'action-slash'\n  chr:                    'action-chr'\n  error:                  'action-error'\n  }\n\nType = {\n  text:                   'text'\n  openTag:                'open'\n  closeTag:               'close'\n  attributeName:          'attribute-name'\n  attributeValue:         'attribute-value'\n  }\n\ncharToAction = {\n  ' ':                    Action.space\n  '\\t':                   Action.space\n  '\\n':                   Action.space\n  '\\r':                   Action.space\n  '<':                    Action.lt\n  '>':                    Action.gt\n  '\"':                    Action.quote\n  \"'\":                    Action.quote\n  '=':                    Action.equal\n  '/':                    Action.slash\n  }\n\n#-----------------------------------------------------------------------------------------------------------\ncreate = ( settings, handler ) ->\n  switch arity = arguments.length\n    when 0 then null\n    when 1 then [ settings, handler, ] = [ null, settings, ]\n    when 2 then null\n    else throw new Error \"^55563^ expected 1 or 2 arguments, got #{arity}\"\n  [ settings, handler, ] = [ handler, null, ] unless isa.function handler\n  ### TAINT validate.xmllexer_settings settings ? {} ###\n  ### TAINT validate.function handler ###\n  settings          = { { include_specials: false, }..., settings..., }\n  lexer             = new EventEmitter()\n  state             = State.data\n  data              = ''\n  tagName           = ''\n  attrName          = ''\n  attrValue         = ''\n  isClosing         = false\n  openingQuote      = ''\n\n  #-----------------------------------------------------------------------------------------------------------\n  action_from_chr = ( chr ) => charToAction[ chr ] ? Action.chr\n\n  #---------------------------------------------------------------------------------------------------------\n  step = ( src, idx, chr ) =>\n    if settings.debug then console.log state, chr\n    actions = lexer.stateMachine[ state ]\n    action  = actions[ action_from_chr chr ] ? actions[ Action.error ] ? actions[ Action.chr ]\n    action src, idx, chr\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  lexer.write = ( src ) =>\n    for idx in [ 0 ... src.length ]\n      step src, idx, src[ idx ]\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  lexer.flush = =>\n\n  #---------------------------------------------------------------------------------------------------------\n  emit = ( ref, type, value ) =>\n    # sigil = null\n    # # tags like: '?xml', '!DOCTYPE', comments\n    unless settings.include_specials\n      return null if tagName[ 0 ] in '!?'\n    # switch sigil = tagName[ 0 ]\n    #   when '?' then type = ''\n    #   when '!' then type = 'declaration'\n    # event.sigil = sigil if sigil?\n    event = { ref, type, value }\n    if handler? then  handler { ref, type, value, }\n    else              lexer.emit 'data', { type, value, }\n\n  ```\n  lexer.stateMachine = {\n    [State.data]: {\n      [Action.lt]: ( src, idx, chr ) => {\n        if (data.trim()) {\n          emit( '^1^', Type.text, data);\n        }\n        tagName = '';\n        isClosing = false;\n        state = State.tagBegin;\n      },\n      [Action.chr]: ( src, idx, chr ) => {\n        data += chr;\n      },\n    },\n    [State.cdata]: {\n      [Action.chr]: ( src, idx, chr ) => {\n        data += chr;\n        if (data.substr(-3) === ']]>') {\n          emit( '^2^', Type.text, data.slice(0, -3));\n          data = '';\n          state = State.data;\n        }\n      },\n    },\n    [State.tagBegin]: {\n      [Action.space]: noop,\n      [Action.chr]: ( src, idx, chr ) => {\n        tagName = chr;\n        state = State.tagName;\n      },\n      [Action.slash]: ( src, idx, chr ) => {\n        tagName = '';\n        isClosing = true;\n      },\n    },\n    [State.tagName]: {\n      [Action.space]: ( src, idx, chr ) => {\n        if (isClosing) {\n          state = State.tagEnd;\n        } else {\n          state = State.attributeNameStart;\n          emit( '^3^', Type.openTag, tagName);\n        }\n      },\n      [Action.gt]: ( src, idx, chr ) => {\n        if (isClosing) {\n          emit( '^4^', Type.closeTag, tagName);\n        } else {\n          emit( '^5^', Type.openTag, tagName);\n        }\n        data = '';\n        state = State.data;\n      },\n      [Action.slash]: ( src, idx, chr ) => {\n        state = State.tagEnd;\n        emit( '^6^', Type.openTag, tagName);\n      },\n      [Action.chr]: ( src, idx, chr ) => {\n        tagName += chr;\n        if (tagName === '![CDATA[') {\n          state = State.cdata;\n          data = '';\n          tagName = '';\n        }\n      },\n    },\n    [State.tagEnd]: {\n      [Action.gt]: ( src, idx, chr ) => {\n        emit( '^7^', Type.closeTag, tagName);\n        data = '';\n        state = State.data;\n      },\n      [Action.chr]: noop,\n    },\n    [State.attributeNameStart]: {\n      [Action.chr]: ( src, idx, chr ) => {\n        attrName = chr;\n        state = State.attributeName;\n      },\n      [Action.gt]: ( src, idx, chr ) => {\n        data = '';\n        state = State.data;\n      },\n      [Action.space]: noop,\n      [Action.slash]: ( src, idx, chr ) => {\n        isClosing = true;\n        state = State.tagEnd;\n      },\n    },\n    [State.attributeName]: {\n      [Action.space]: ( src, idx, chr ) => {\n        state = State.attributeNameEnd;\n      },\n      [Action.equal]: ( src, idx, chr ) => {\n        emit( '^8^', Type.attributeName, attrName);\n        state = State.attributeValueBegin;\n      },\n      [Action.gt]: ( src, idx, chr ) => {\n        attrValue = '';\n        emit( '^9^', Type.attributeName, attrName);\n        emit( '^10^', Type.attributeValue, attrValue);\n        data = '';\n        state = State.data;\n      },\n      [Action.slash]: ( src, idx, chr ) => {\n        isClosing = true;\n        attrValue = '';\n        emit( '^11^', Type.attributeName, attrName);\n        emit( '^12^', Type.attributeValue, attrValue);\n        state = State.tagEnd;\n      },\n      [Action.chr]: ( src, idx, chr ) => {\n        attrName += chr;\n      },\n    },\n    [State.attributeNameEnd]: {\n      [Action.space]: noop,\n      [Action.equal]: ( src, idx, chr ) => {\n        emit( '^13^', Type.attributeName, attrName);\n        state = State.attributeValueBegin;\n      },\n      [Action.gt]: ( src, idx, chr ) => {\n        attrValue = '';\n        emit( '^14^', Type.attributeName, attrName);\n        emit( '^15^', Type.attributeValue, attrValue);\n        data = '';\n        state = State.data;\n      },\n      [Action.chr]: ( src, idx, chr ) => {\n        attrValue = '';\n        emit( '^16^', Type.attributeName, attrName);\n        emit( '^17^', Type.attributeValue, attrValue);\n        attrName = chr;\n        state = State.attributeName;\n      },\n    },\n    [State.attributeValueBegin]: {\n      [Action.space]: noop,\n      [Action.quote]: ( src, idx, chr ) => {\n        openingQuote = chr;\n        attrValue = '';\n        state = State.attributeValue;\n      },\n      [Action.gt]: ( src, idx, chr ) => {\n        attrValue = '';\n        emit( '^18^', Type.attributeValue, attrValue);\n        data = '';\n        state = State.data;\n      },\n      [Action.chr]: ( src, idx, chr ) => {\n        openingQuote = '';\n        attrValue = chr;\n        state = State.attributeValue;\n      },\n    },\n    [State.attributeValue]: {\n      [Action.space]: ( src, idx, chr ) => {\n        if (openingQuote) {\n          attrValue += chr;\n        } else {\n          emit( '^19^', Type.attributeValue, attrValue);\n          state = State.attributeNameStart;\n        }\n      },\n      [Action.quote]: ( src, idx, chr ) => {\n        if (openingQuote === chr) {\n          emit( '^20^', Type.attributeValue, attrValue);\n          state = State.attributeNameStart;\n        } else {\n          attrValue += chr;\n        }\n      },\n      [Action.gt]: ( src, idx, chr ) => {\n        if (openingQuote) {\n          attrValue += chr;\n        } else {\n          emit( '^21^', Type.attributeValue, attrValue);\n          data = '';\n          state = State.data;\n        }\n      },\n      [Action.slash]: ( src, idx, chr ) => {\n        if (openingQuote) {\n          attrValue += chr;\n        } else {\n          emit( '^22^', Type.attributeValue, attrValue);\n          isClosing = true;\n          state = State.tagEnd;\n        }\n      },\n      [Action.chr]: ( src, idx, chr ) => {\n        attrValue += chr;\n      },\n    },\n  };\n\n\n  ```\n  return lexer\n\n\nmodule.exports = { State, Action, Type, create, }\n\n\n\n\n"
  ]
}